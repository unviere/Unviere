<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>game | unviere </title>
  <meta name="description" content=" ">
    <meta name="author" content="unviere ">
    
    

  <link rel="shortcut icon" type="x-icon" href="Img/unv_games.png">
  
    <link rel ="stylesheet" type = "text/css" href ="../Style/general.css">
     <link rel ="stylesheet" type = "text/css" href ="../Style/themes/UnvLight/general.css">
      <link rel ="stylesheet" type = "text/css" href ="../Style/themes/UnvDark/general.css">

  
  <link rel ="stylesheet" type = "text/css" href ="../games/styles/game.css">
    <link rel ="stylesheet" type = "text/css" href ="../Style/themes/UnvLight/game.css">
      <link rel ="stylesheet" type = "text/css" href ="../Style/themes/UnvDark/game.css">
    
      <link rel ="stylesheet" type = "text/css" href ="../Style/topbarv2.css">
<link rel ="stylesheet" type = "text/css" href ="../Style/themes/UnvLight/topbar.css">
<link rel ="stylesheet" type = "text/css" href ="../Style/themes/UnvDark/topbar.css">
       
      
  <link rel="stylesheet"
  href="https://unpkg.com/boxicons@latest/css/boxicons.min.css">
  <link rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/remixicon@4.2.0/fonts/remixicon.css">
    <link rel="stylesheet" href="Style/images.css">
    
     <script defer type="module" src = "../Scripts/topbar new.js"></script>
</head>
<body>
  <input type="checkbox" id="check">
    
    <label class="sidebar-toggle" for="check"><i class="ri-pushpin-line"id="unpinned"></i><i class="ri-pushpin-fill" id="pinned"></i></label>
    <div id="header">
      
    </div>
   <section class ="game">
     <div class="game-head-section">
          <div class="onrbx"> on Roblox </div>
            <div class="game-top" id="game-header">
       
 
      <div class ="game-top-holder"><a id="top-name" name=""></a>
      
<div class = game-top-left>
        <h1 id="game-title">OnlyFiftyCharactersAreAllowed [new] [update] [tag]</h1>
<div class="stats-top-game">
  <p id="game-developer">by: OnlyFiftyCharactersAreAllowed GroupName (official)</p>  <i class="ri-team-fill" id="stats-icon"><i class="ri-play-fill" id="stats-icon-inner"></i></i>
    <h1 class="desk-title-game-stats">Active: </h1>
        <h1 class="active" id="active-top">100k </h1>
        <br>
        <i class="ri-map-pin-user-fill" id="stats-icon"></i>
         <h1 class="desk-title-game-stats">Visits: </h1>
        <h1 class="visits" id="visits-top">100k</h1>
        <br>
        <i class="ri-thumb-up-fill" id="stats-icon"></i>
         <h1 class="desk-title-game-stats">l
         Liked: </h1>
        <h1 class="likes" id="likes-top">100k </h1>
</div>
        
        </div>

        <div class="game-top-right">
          <div class="game-top-right-mob">
            <div class="game-top-info-parent">
            <a class="game-top-info" id="info-button" ><i class="ri-information-line"></i></a>
            <div class="game-top-info-drop"> <div class="game-top-info-content">
              
            </div>
            </div>
            </div>
            <div class="game-top-nav-parent">
<a  class="game-top-nav" id="nav-button"><i class="ri-more-2-fill"></i></a>
 <div class="game-top-nav-drop"> 
 <div class="game-top-nav-content">
              
            </div>
            </div>
          </div>
          </div>
          <a href="" class="group-icon" id="developer-img-link"><img src="" id="developer-img"></a>
<div id="game-top-socials"> 
<a href="" class="social" id="discord"><i class="ri-discord-fill social-icon" ></i></a>
<a href="" class="social" id="yt"><i class="ri-youtube-fill social-icon"></i></a>
 <a href="" class="social" id="x"><i class="ri-twitter-x-fill social-icon" ></i></a>
  <a href="" class="social" id="insta"><i class="ri-instagram-fill social-icon"></i></a>
  
    <a href="" class="social" id="tiktok"><i class="ri-tiktok-fill social-icon"></i></a>
 <a href="" class="social" id="guild"> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Guildeding-Logo--Streamline-Logos" height="35" width="35">
        <desc>Guildeding Logo Streamline Icon: https://streamlinehq.com</desc>
        <path fill="#ffd700" d="M0.24 1.8436H23.76C23.76 3.6397 23.6296 5.2818 23.3954 6.785H5.8399V7.8829C5.8399 11.675 8.8259 14.9197 11.9989 16.8633C13.4486 15.9727 14.7337 14.8555 15.714 13.5021H11.7648C10.5086 12.2716 9.5646 10.7117 9.2866 8.9798H22.9582C20.3079 19.83 12 22.1564 12 22.1564S0.24 17.7645 0.24 1.8436Z" stroke-width="1"></path>
    </svg></a>
</div>
<div id="game-top-socials-mob">
  
<div class="game-social-drop-parent" id="social-button">
  <a><i class="ri-arrow-drop-down-line"></i></a> <!-- Just the anchor for the icon -->
  <div class="game-social-drop" id="game-top-socials-drop"> 
    <a href="" class="social" id="discord-mob"><i class="ri-discord-fill"></i></a>
    <a href="" class="social" id="yt-mob"><i class="ri-youtube-fill"></i></a>
    <a href="" class="social" id="x-mob"><i class="ri-twitter-x-fill"></i></a>
      <a href="" class="social" id="insta-mob"><i class="ri-instagram-fill"></i></a>
      
          <a href="" class="social" id="tiktok-mob"><i class="ri-tiktok-fill"></i></a>
    <a href="" class="social" id="guild-mob"> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Guildeding-Logo--Streamline-Logos" height="35" width="35">
        <desc>Guildeding Logo Streamline Icon: https://streamlinehq.com</desc>
        <path fill="#ffd700" d="M0.24 1.8436H23.76C23.76 3.6397 23.6296 5.2818 23.3954 6.785H5.8399V7.8829C5.8399 11.675 8.8259 14.9197 11.9989 16.8633C13.4486 15.9727 14.7337 14.8555 15.714 13.5021H11.7648C10.5086 12.2716 9.5646 10.7117 9.2866 8.9798H22.9582C20.3079 19.83 12 22.1564 12 22.1564S0.24 17.7645 0.24 1.8436Z" stroke-width="1"></path>
    </svg></a>
  </div>
</div>
</div>
        
         
        </div>
      </div>
     
            </div>
       <div class="game-top-navinfo"></div>

      <div class="game-img" >
        <img id="game-thumb-1" src="Img/tumb_parallel.png">
      </div>

     
      
     

      <div class ="game-playbar">
        <div class="game-playbar-content">
        <a class="game-drop-down-button button-n">•••</a>
  <ul class="game-drop-down">
             
          <li>
            <a class="button-n" href="">Groups</a>
            
            <a class="button-n" href="https://unviere.github.io/Unviere/games">Games</a>
            
             <a class="button-n" id="instal-button-dd"><i class =""></i> How to install</a></label>
          </li>
        </ul> 
                   <a class="game-playbar-desk-button button-n" href="">Groups</a>
            
            <a class="game-playbar-desk-button button-n" href="https://unviere.github.io/Unviere/games">Games</a>
        <a href="" class="ctaa" id="play-button"><i class ="ri-play-fill"></i>Play now</a>
        <label class="instal" for="toggle-instalrbx" id="instalrbxopen">
        <a class="button-n" id="instal-button"><i class =""></i> How to install</a></label>
        
       

      </div>
</div>
      </div>


      
       <div class="game-stats">
        
        <h1 id ="server-size">Server size:N/A</h1>
        <br>
        <h1 id ="favorites">Favourite:N/A</h1>
        <br>
        <h1 id ="created-date">Created N/A</h1>
        <br>
        <h1 id ="last-updated">Updated: </h1>
        <br>
        <a class="link" href="" id="upd-log">Update log</a>
        <br>
        <h1 id="genre">Genre: N/A</h1>
        <br>
        <h1 id="sub-genre">Error with loading game stats!!</h1>
      
        
      </div>
      
        
      
      

      <div class="game-buttons-bar">
      <button class="tablinks" onclick="opentab(event, 'description')" id="main">Description</button>
  <button class="tablinks" onclick="opentab(event, 'passes')">Passes</button>
      </div>

<div id="desc">
          <div id="description" class ="tabs-game-buttons-bar">Failed to load description. <br> 
          The link need contain the correct data in order to load the game details.
          <br>
          <h1>What to do to fix.</h1>
          <br>
          • Check the link 
          Make sure the link contains the correct id and name.
          It should be something like https://unviere.github.io/Unviere/games/game?id=1234567/game-name
          or https://unviere.github.io/Unviere/games/game?id=1234567/game-name/info?extra-info
            <br>
            • Check your internet 
<br>
• Did you reload the page to much?
It might be the case that you overloaed the api reqeusts to get the data.
<br> 
<h1>It still doesn't work?</h1>
<br>
<p>If this not working go to <a class="link" href="https://unviere.github.io/Unviere/games">the games page.</a> And click on a game so it should load correctly from this page.</p>
</div>
      
      </div>
        
      </section>
      <template>
  <h1 id="gameTitle">Game Title</h1>
  <img id="gameIcon" src="" alt="Game Icon">
  <p id="gameDesc">lololol hi lorem ipsum dolor sit amet dit for to be do HD so is een is een it en is een je een us en is een to us so us DJ ha en ga aan ga aan ga af ga B zo aan ga V is V ca V ga acc acc zo sa acc ca acc ga acc ga G ra acc zo dat acc zo do to to to if go if you if up to us to if up it uit up je up if up if he up to up it it up ye to get us to ye up to keep FF je je</p>
  <p id="gameActive">Active Players</p>
  <p id="gameOwner">Owner</p>
  <p id="gameLikes">Likes</p>
  <button>play now</button>
  </template>
  
   <script src = "../Scripts/settings/theme.js"></script>

<script>// Get the header element
document.addEventListener('DOMContentLoaded', function() {
    const socials = document.querySelectorAll('.social-icon'); 
    const header = document.querySelector('.game-top');
    const title = document.querySelector('.game-top-left');
    const social_drop = document.querySelector('.game-social-drop');
    const nav_drop = document.querySelector('.game-top-nav-content');
    const info_drop = document.querySelector('.game-top-info-content');
    const header_navinfo = document.querySelector('.game-top-navinfo')

    // Function to handle scroll behavior
    function handleScroll() {
        const title_sticky = document.querySelector('.game-top-navb-left'); // Requery to get the dynamically loaded element
        if (window.scrollY > 50) {
            header?.classList.add('scrolled');
            title?.classList.add('game-top-left-sticky');
            social_drop?.classList.add('game-top-sticky');
            info_drop?.classList.add('game-top-sticky');
            nav_drop?.classList.add('game-top-sticky');
            title_sticky?.classList.add('game-top-navb-left-sticky');
            header_navinfo.classList.add('game-top-navinfo-sticky')

            socials.forEach(function(social) {
                social.classList.add('sticky-socials');
            });
        } else {
            header?.classList.remove('scrolled');
            title?.classList.remove('game-top-left-sticky');
            social_drop?.classList.remove('game-top-sticky');
            info_drop?.classList.remove('game-top-sticky');
            nav_drop?.classList.remove('game-top-sticky');
           
            title_sticky?.classList.remove('game-top-navb-left-sticky');
            
            header_navinfo.classList.remove('game-top-navinfo-sticky')

            socials.forEach(function(social) {
                social.classList.remove('sticky-socials');
            });
        }
    }

    // Add event listener for scrolling
    if (header && socials.length > 0) {
        window.addEventListener('scroll', handleScroll);
    }

    // MutationObserver to detect dynamically added elements
    const observer = new MutationObserver(function(mutations) {
        mutations.forEach(function(mutation) {
            mutation.addedNodes.forEach(function(node) {
                // Check if the node is the element we're looking for
                if (node.nodeType === 1 && node.classList.contains('game-top-navb-left')) {
                    console.log('Dynamically loaded element found:', node);

                    // Apply scroll event once the element is found
                    window.addEventListener('scroll', handleScroll);

                    // Call handleScroll immediately in case the page is already scrolled
                    handleScroll();
                }
            });
        });
    });

    // Observe changes in the entire document
    observer.observe(document.body, { childList: true, subtree: true });
});
</script>
<script>document.addEventListener('DOMContentLoaded', () => {
  const gameName = window.location.search.substring(1) // Get game name from the fragment
  console.log('Game Name from URL:', gameName);

  if (gameName) {
    // Static mapping of game names to universe IDs and other details
    const gameDetails = {
      //unviere 
      'id=14229107623/parallelized-engineers': { universeId: '4922186765' },
      // parcle
       'id=10135698219/happy-obbies': { universeId: '3721966693' },
       //
     
      'id=116463530852265/the-secret-of-puzzle-island': { universeId: '6449806598' },
      
      //game jams
      
       'id=14229107623/Parallelized-Engineers/game-jam?date=07-2023': { universeId: '4922186765' },
       //
        'id=16133672663/Diverse-And-Unexpected/game-jam?date=02-2024': { universeId: '5574638301' },
        //
          'id=116463530852265/the-secret-of-puzzle-island/game-jam?date=08-2024': { universeId: '6449806598' },
          //
           'id=107169670237182/a-historical-trip/game-jam?date=10-2024': { universeId: '6663022834' },
           //
          //fighting 
            'id=5032972341/Sk-Sword-Fighting': { universeId: '1738552509' },
    };

    const game = gameDetails[gameName];
    console.log('Matching Game Details:', game);

    if (game) {
      const apiUrl = `https://games.roproxy.com/v1/games?universeIds=${game.universeId}`;
      console.log('API URL:', apiUrl);

      // Fetch main game data
      fetch(apiUrl)
        .then(response => {
          if (!response.ok) {
            throw new Error(`Network response was not ok: ${response.statusText}`);
          }
          return response.json();
        })
        .then(data => {
          console.log('Fetched Game Data:', data);
          if (data.data && Array.isArray(data.data) && data.data.length > 0) {
            const gameData = data.data[0];
            console.log('Parsed Game Data:', gameData);

            function formatNumber(num) {
              if (num >= 1e9) {
                return (num / 1e9).toFixed(1) + 'b';
              } else if (num >= 1e6) {
                return (num / 1e6).toFixed(1) + 'm';
              } else if (num >= 1e3) {
                return (num / 1e3).toFixed(1) + 'k';
              } else {
                return num;
              }
            }

            // Update DOM elements with game data
            document.getElementById('game-title').textContent = gameData.name || 'No title available';
            document.getElementById('side-menu-title').textContent = gameData.name
            document.getElementById('side-menu-desc').textContent = "one of the games from unviere or thier partners on some game pages there are more sections for that game"
            document.getElementById('game-title-top').textContent = gameData.sourceName || 'No title available';
            document.getElementById('description').innerHTML = gameData.sourceDescription || 'No description available';
            document.getElementById('game-developer').textContent = `by: ${gameData.creator?.name || 'n/a'}`;
            document.getElementById('game-developer-top').textContent = `by: ${gameData.creator?.name || 'n/a'}`;
            document.getElementById('active-top').textContent = ` ${formatNumber(gameData.playing || '0')}`;
            document.getElementById('visits-top').textContent = ` ${formatNumber(gameData.visits || '0')}`;
            document.getElementById('likes-top').textContent = ` ${formatNumber(gameData.likes || 'N/A')}`;
            document.getElementById('active-nav').textContent = ` ${formatNumber(gameData.playing || '0')}`;
            document.getElementById('visits-nav').textContent = ` ${formatNumber(gameData.visits || '0')}`;
            document.getElementById('likes-nav').textContent = ` ${formatNumber(gameData.likes || 'N/A')}`;
          
            document.getElementById('server-size').textContent = `Server size: ${gameData.maxPlayers || 'N/A'}`;
            document.getElementById('favorites').textContent = `Favorite: ${gameData.favoritedCount || 'N/A'}`;
            document.getElementById('created-date').textContent = `Development started: ${new Date(gameData.created).toLocaleDateString() || 'N/A'}`;
            document.getElementById('last-updated').textContent = `Updated: ${new Date(gameData.updated).toLocaleDateString() || 'N/A'}`;
            document.getElementById('genre').textContent = `Genre: ${gameData.genre || 'N/A'}`;


//

          document.title = `${gameData.sourceName || 'Game'} | Unviere`;
            const metaDescription = document.querySelector('meta[name="description"]');
            if (metaDescription) {
                metaDescription.setAttribute('content', gameData.sourceDescription || 'No description available.');
            }
            // Fetch and display game thumbnail
            const imgUrl = `https://thumbnails.roproxy.com/v1/games/multiget/thumbnails?universeIds=${game.universeId}&countPerUniverse=1&defaults=true&size=768x432&format=Png&isCircular=false`;https://unviere.github.io/Unviere/games/game?id=10135698219/happy-obbies

            console.log('Constructed Image URL:', imgUrl);

            fetch(imgUrl)
              .then(response => {
                if (!response.ok) {
                  throw new Error(`Network response was not ok: ${response.statusText}`);
                }
                return response.json();
              })
              .then(thumbnailData => {
                console.log('Thumbnail Data:', thumbnailData);  // Log full data for inspection
                if (thumbnailData && thumbnailData.data && thumbnailData.data[0] && thumbnailData.data[0].thumbnails && thumbnailData.data[0].thumbnails.length > 0) {
                  // Get the first image URL from the thumbnails array
                  const firstImageUrl = thumbnailData.data[0].thumbnails[0].imageUrl;
                  console.log('First Image URL:', firstImageUrl);  // Log the first image URL
                  
                  // Select the image element
                  const imgElement = document.querySelector('#game-thumb-1');
                  
                  if (imgElement) {
                    imgElement.src = firstImageUrl;  // Set the image source to the first image URL
                  } else {
                    console.error('Image element with id="game-thumb-1" not found in DOM');
                  }
                } else {
                  console.error('No valid thumbnails received from API');
                }
              })
              .catch(error => {
                console.error('Error fetching the thumbnail:', error);
              });

            // Fetch additional info (sub-genres, etc.)
            const infoUrl = `https://raw.githubusercontent.com/unviere/Unviere/refs/heads/main/games/api/game-api%3Fid%3D${game.universeId}.json`;
            console.log('Additional Info URL:', infoUrl);

            fetch(infoUrl)
              .then(response => {
                if (!response.ok) {
                  throw new Error(`Network response was not ok: ${response.statusText}`);
                }
                return response.json();
              })
              .then(infoData => {
                console.log('Fetched Sub-Genre Data:', infoData);
                if (infoData && infoData.data && infoData.data.length > 0) {
                  const subInfoData = infoData.data[0];

                  // Update DOM elements with the additional info
                  document.getElementById('sub-genre').textContent = `Other genres: ${subInfoData.genres || 'N/A'}`;
                  
                  document.getElementById('developer-img').src =  subInfoData.devIcon || '';
                  
                  document.getElementById('developer-img-link'). href =  subInfoData.devLink || '';
                  
                  document.getElementById('play-button').href = subInfoData.deepLink

                  // Make the Discord icon visible based on the response
                  const infoIcon = document.getElementById('info-button');
                  const navIcon = document.getElementById('nav-button');
                  const socialIcon = document.getElementById('social-button');
                
                  if (subInfoData.infoEnabled === true) {
                    infoIcon.style.display = "flex";
                  } else {
                    infoIcon.style.display = "none";
                  }
                  
                  if (subInfoData.navEnabled === true) {
                    navIcon.style.display = "flex";
                  } else {
                    navIcon.style.display = "none";
                  }
                  
                  if (subInfoData.socialsEnabled === true) {
                    socialIcon.style.display = "flex";
                  } else {
                    socialIcon.style.display = "none";
                  }

                  // Discord icon handling
                  const discordIcon = document.getElementById('discord');
                  const discordMobIcon = document.getElementById('discord-mob');
                  if (subInfoData.discord === true) {
                    discordIcon.style.display = "flex";
                    discordMobIcon.style.display = "flex";
                    discordIcon.href = subInfoData.discordLink || ''; // Set the Discord link if available
                    
                    discordMobIcon.href = subInfoData.discordLink || ''; // Set the Discord link if available
                  } else {
                    discordIcon.style.display = "none";
                    discordMobIcon.style.display = "none";
                  }
    
                  // YouTube icon handling
                  const ytIcon = document.getElementById('yt');
                  const ytMobIcon = document.getElementById('yt-mob');
                  if (subInfoData.yt === true) {
                    ytIcon.style.display = "flex";
                    ytMobIcon.style.display = "flex";
                    ytIcon.href = subInfoData.ytLink || ''; 
                    ytMobIcon.href = subInfoData.ytLink || ''; 
                  } else {
                    ytIcon.style.display = "none";
                    ytMobIcon.style.display = "none";
                  }
                  //x
                  const twitterIcon = document.getElementById('x');
                  const twitterMobIcon = document.getElementById('x-mob');
                  if (subInfoData.x === true) {
                    twitterIcon.style.display = "flex";
                    twitterMobIcon.style.display = "flex";
                    twitterIcon.href = subInfoData.xLink || ''; 
                  
                    twitterMobIcon.href = subInfoData.xLink || ''; 
                  } else {
                    twitterIcon.style.display = "none";
                    twitterMobIcon.style.display = "none";
                  }
                  
                                    //insta
                  const instaIcon = document.getElementById('insta');
                  const instaMobIcon = document.getElementById('insta-mob');
                  if (subInfoData.insta === true) {
                    instaIcon.style.display = "flex";
                    instaMobIcon.style.display = "flex";
                    instaIcon.href = subInfoData.instaLink || ''; 
                  
                    instaMobIcon.href = subInfoData.instaLink || ''; 
                  } else {
                    instaIcon.style.display = "none";
                    instaMobIcon.style.display = "none";
                  }
                  //tiktok
                  const tiktokIcon = document.getElementById('tiktok');
                  const tiktokMobIcon = document.getElementById('tiktok-mob');
                  if (subInfoData.tiktok === true) {
                    tiktokIcon.style.display = "flex";
                    tiktokMobIcon.style.display = "flex";
                    tiktokIcon.href = subInfoData.tiktokLink || ''; 
                    
                    toktokMobIcon.href = subInfoData.tiktokLink || ''; 
                  } else {
                    tiktokIcon.style.display = "none";
                    tiktokMobIcon.style.display = "none";
                  }
                  //guilded 
                  const guildIcon = document.getElementById('guild');
                  const guildMobIcon = document.getElementById('guild-mob');
                  if (subInfoData.guilded === true) {
                    guildIcon.style.display = "flex";
                    guildMobIcon.style.display = "flex";
                    guildIcon.href = subInfoData.guildedLink || ''; 
                  
                    guildMobIcon.href = subInfoData.guildedLink || ''; 
                  } else {
                    guildIcon.style.display = "none";
                    guildMobIcon.style.display = "none";
                  }
                  // Update log handling
                  const updLog = document.getElementById('upd-log');
                  if (subInfoData.updateLog === true) {
                    updLog.style.display = "flex";
                    updLog.href = subInfoData.updateLogLink || '';
                  } else {
                    updLog.style.display = "none";
                  }
                  
                } else {
                  console.error('No valid sub-genre data found');
                }
              })
              .catch(error => {
                console.error('Error fetching the sub-genre data:', error);
              });
          } else {
            console.error('No valid game data found.');
          }
        })
        .catch(error => {
          console.error('Error fetching the game data:', error);
        });
    } else {
      console.error('Game details not found for name:', gameName);
    }
  } else {
    console.error('No game name found in the URL');
  }
});
</script>
</body>
</html>